'use strict';var LeoCdpAdmin=window.LeoCdpAdmin||{};
LeoCdpAdmin.loadView=LeoCdpAdmin.loadView||function(b,a,c,d){var g="number"===typeof window.apiCacheTime2Live?window.apiCacheTime2Live:5,k="boolean"===typeof window.webTemplateCache?window.webTemplateCache:!0,l="lview_"+getCacheKey(b+a,{}),e=!1;k&&(e=lscache.get(l));if(e){if($(a).empty().html(e),$(window).scrollTop(0),"function"===typeof c)try{c.apply()}catch(f){console.error(f)}}else $.ajax({url:window.baseLeoAdminUrl+b,type:"GET",success:function(f){if(!0===d)$(a).empty().html(f),lscache.set(l,
f,g);else{var n="function"===typeof window.i18nLeoAdminData?window.i18nLeoAdminData():{};f=Handlebars.compile(f)(n);$(a).empty().html(f);lscache.set(l,f,g)}$(window).scrollTop(0);console.log(LeoCdpAdmin);if("function"===typeof c)try{c.apply()}catch(h){console.error(h)}},error:function(f){console.error("loadView.error: ",f)}})};Handlebars.registerHelper("formatCurrency",function(b){return b.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")});
Handlebars.registerHelper("eachProperty",function(b,a){var c="",d;for(d in b)c+=a.fn({property:d,value:b[d]});return c});function getCompiledTemplate(b){return Handlebars.compile($(b).html().trim())}function getFullUrlStaticMedia(b,a,c){c=c||window.staticBaseUrl||"";return b&&""!==b&&0>b.indexOf("http")?c+b:a||""}function getQueryMapFromUrl(b){for(var a=[],c=b.slice(b.indexOf("?")+1).split("\x26"),d=0;d<c.length;d++)b=c[d].split("\x3d"),a.push(b[0]),a[b[0]]=b[1];return a}
function textTruncate(b,a,c){null==a&&(a=100);null==c&&(c="...");return b.length>a?b.substring(0,a-c.length)+c:b}function toTitleCase(b){return b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()}function toDateStringVN(b){var a=b.getDate(),c=b.getMonth()+1;b=b.getFullYear();10>a&&(a="0"+a);10>c&&(c="0"+c);return a+"/"+c+"/"+b}function getCacheKey(b,a){b+=JSON.stringify(a);return md5(b)}
function isMobileDevice(){var b=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,
4)))b=!0;return b}function getUserSession(){var b=lscache.get("usersession");if(b)return b;console.error("usersession is empty");return""}var LeoAdminApiUtil=window.LeoAdminApiUtil||{};
!0!==LeoAdminApiUtil.isLoaded&&function(){var b={isLoaded:!1,debug:!1,baseLeoAdminUrl:window.baseLeoAdminUrl||"http://localhost:9070",baseUploadApi:window.baseUploadApi||"http://localhost:9070",callPostApi:function(a,c,d){"function"!==typeof d&&console.error("callback must be a function");"string"!==typeof a&&console.error("urlStr must be a string");$.ajax({url:a,crossDomain:!0,data:JSON.stringify(c),contentType:"application/json",type:"POST"}).done(function(g){d(g)})},callPostAdminApi:function(a,
c,d){console.log("callPostAdminApi ...");"function"!==typeof d&&console.error("callback must be a function");var g=lscache.get("usersession");g?(c.usersession=g,jQuery.ajax({type:"POST",crossDomain:!0,url:a,data:JSON.stringify(c),contentType:"application/json",dataType:"json",success:function(k){d(k)},error:function(k,l,e){console.error("callPostAdminApi POST failed."+k)}})):d({uri:a,data:"",errorMessage:"No Authentication",httpCode:501})},getSecuredData:function(a,c,d){console.log("getSecuredData ...");
"function"!==typeof d&&console.error("callback must be a function");var g=lscache.get("usersession");if("string"===typeof g){var k="number"===typeof window.apiCacheTime2Live?window.apiCacheTime2Live:1,l="boolean"===typeof window.dataApiCache?window.dataApiCache:!0,e="hget_"+getCacheKey(a,c),f=!1;l&&(f=lscache.get(e));if(f)try{var n=JSON.parse(f);d(n)}catch(h){console.error(h)}else c._t=(new Date).getTime(),jQuery.ajax({type:"GET",crossDomain:!0,url:a,data:c,beforeSend:function(h){h.setRequestHeader("leouss",
g)},contentType:"application/json",dataType:"json",success:function(h){lscache.set(e,JSON.stringify(h),k);d(h)},error:function(h,p,m){console.error("getSecuredData POST failed."+h)}})}else d({uri:a,data:"",errorMessage:"No Authentication",httpCode:501})},renderViewForSecuredData:function(a,c,d,g,k,l){window.baseDeliveryApi&&a?LeoAdminApiUtil.getSecuredData(baseDeliveryApi+a,c,function(e){var f=e.staticBaseUrl||"";if(0===e.httpCode&&""===e.errorMessage&&e.data){e=e.data;var n=getCompiledTemplate(g),
h=$(d);h.empty();for(var p in e){var m=e[p],q=m.type;"function"===typeof k&&(m=k(m,f));m=n(m);h.append(m);"function"===typeof l&&(m=h.children().last(),l(q,m,f))}}}):console.error("baseDeliveryApi and apiURI must be not NULL")},httpGetDataJson:function(a){var c=lscache.get("usersession");if(c)return jQuery.ajax({url:b.baseLeoAdminUrl+a,type:"GET",dataType:"json",beforeSend:function(d){d.setRequestHeader("leouss",c)}});console.error("No usersession found in lscache")},debugLog:function(a){!0===window.debugMode&&
(console.log("caller context: ",b.debugLog.caller),[].forEach.call(arguments,function(c){console.log(c)}))},logErrorPayload:function(a){console.error(a);var c=a.httpCode;a=a.errorMessage;var d="ErrorCode: "+c,g=!1;"No Authentication"===d&&501===c&&(d+=". You need to do login !",g=!0);iziToast.error({timeout:4E3,title:a,message:d,onClosing:function(k,l,e){g&&(LeoAdminApiUtil.logout(),setTimeout(function(){location.reload(!0)},1E3))}})},isLoginSessionOK:function(){var a=lscache.get("usersession"),c=
lscache.get("encryptionkey");return"string"===typeof a&&"string"===typeof c},logout:function(a){lscache.flush();setTimeout(function(){"function"===typeof a?a():window.location="/"},1500)},formater:{toDateString:function(a){return moment.utc(parseFloat(a)).local().format("YYYY-MM-DD HH:mm:ss")}}};LeoAdminApiUtil=b;LeoAdminApiUtil.isLoaded=!0}();
function isValidURL(b){return!!/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i.test(b)}
var errorNoAuthorization=function(){iziToast.error({title:"Error",message:"You don not have authorization to use this function, please contact your system administrator."})},appendItemCount=function(b,a,c){c=(new Number(c)).toLocaleString();a='\x3ch5 class\x3d"collector-item"\x3e '+a+' \x26nbsp; \x3cspan class\x3d"label label-default collector-count" \x3e '+c+" \x3c/span\x3e  \x3c/h5\x3e";$(b).append(a)},infoEnterpriseVersion=function(b){var a="";b&&(a='The feature \x3cb\x3e"'+$(b).attr("title")+
'"\x3c/b\x3e is under development. It will be available in \x3cb\x3e"LEO CDP version 1.0"\x3c/b\x3e');iziToast.info({title:"Information Box",color:"green",message:a})},underDevelopment=function(b){var a="";b&&(a='\x3cb\x3eThe feature "'+$(b).attr("title")+'" is under development. We are working hard to release it soon, thanks! \x3c/b\x3e');iziToast.info({title:"Information Box",color:"yellow",message:a})},notifyErrorMessage=function(b){iziToast.error({title:"Error",message:b})},notifySuccessMessage=
function(b){iziToast.success({timeout:3200,icon:"fa fa-check-square-o",title:"Information",message:b})},leoCdpDocumentation=function(b){iziToast.info({title:"Information Box",color:"green",message:"We are working hard, as much as we can",onClosing:function(a,c,d){}})},setupCollapsePanels=function(){$(".panel-collapse").on("show.bs.collapse",function(){$(this).siblings(".collapse-panel-heading").addClass("active")});$(".panel-collapse").on("hide.bs.collapse",function(){$(this).siblings(".collapse-panel-heading").removeClass("active")})};