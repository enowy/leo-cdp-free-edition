'use strict';function profileAddNewTextHashSet(c){$('p[data-field\x3d"'+c+'"] \x3e ul').append('\x3cli class\x3d"list-group-item" \x3e\x3cdiv class\x3d"row" \x3e\x3cdiv class\x3d"col-md-11" \x3e\x3cinput class\x3d"form-control" type\x3d"text" placeholder\x3d"Value" data-fieldholder\x3d"hashset" data-fieldtype\x3d"string" autocomplete\x3d"off"\x3e\x3c/div\x3e\x3cdiv class\x3d"col-md-1" \x3e\x3ch4 onclick\x3d"$(this).parent().parent().parent().remove()" \x3e\x3ci class\x3d"fa fa-times-circle delete-item-btn" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/h4\x3e \x3c/div\x3e\x3c/div\x3e\x3c/li\x3e')}
function removeHashMapItem(c){$(c).parent().parent().remove()}
function loadHashMapSelector(c,m,l,b,d){var n='\x3cdiv class\x3d"col-md-3" \x3e \x3cselect class\x3d"form-control" id\x3d"key_'+c+'" name\x3d"'+m+'" \x3e';_.forOwn(l,function(t,f){t='\x3coption name\x3d"'+m+'" value\x3d"'+f+'"\x3e '+f.toUpperCase()+" \x3c/option\x3e";f===b&&(t='\x3coption name\x3d"'+m+'" selected value\x3d"'+f+'"\x3e '+f.toUpperCase()+" \x3c/option\x3e");n+=t});n+=" \x3c/select\x3e \x3c/div\x3e";""===b&&$("#key_"+c).find("option:first").attr("selected","selected");return'\x3cli id\x3d"item_'+
c+'" class\x3d"list-group-item" \x3e\x3cdiv class\x3d"row" \x3e '+n+('\x3cdiv class\x3d"col-md-8" \x3e\x3cinput id\x3d"value_'+c+'" value\x3d"'+(d?d:"")+'" class\x3d"form-control" type\x3d"text" placeholder\x3d"Value" data-fieldholder\x3d"hashmap" data-fieldtype\x3d"string" autocomplete\x3d"off"\x3e\x3c/div\x3e\x3cdiv title\x3d"Delete" class\x3d"col-md-1" onclick\x3d"removeHashMapItem(this)" \x3e \x3ch4\x3e\x3ci class\x3d"fa fa-times-circle delete-item-btn" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/h4\x3e \x3c/div\x3e \x3c/div\x3e\x3c/li\x3e')}
var addNewHashMapItem=function(c,m){var l=c+"_"+(new Date).getTime(),b=$("#"+c),d=Object.assign({},m);b.find("option:selected").each(function(){var n=$(this).val();delete d[n]});c=loadHashMapSelector(l,c,d,"","");b.find("ul.list-group").append(c)},loadProfileDataIntoDOM=function(c,m,l,b){LeoAdminApiUtil.callPostAdminApi(baseLeoAdminUrl+"/cdp/profile/get",{id:m},function(d){if(0===d.httpCode&&""===d.errorMessage){var n=d.canInsertData,t=d.canDeleteData;d.canEditData||$("button.data-control-edit").attr("disabled",
"disabled");t||$("button.data-control-delete").attr("disabled","disabled");n||$("button.data-control-insert").attr("disabled","disabled");LeoCdpAdmin.routerContext.dataObject="function"===typeof l?l(d.data):d.data;$("#data_model_holder").find("*[data-field]").each(function(){$(this).prop("tagName");var f=$(this).attr("type"),g=$(this).data("fieldholder"),q=$(this).data("fieldtype"),r=$(this).data("field"),p=r.split(".");if(1===p.length){var a=LeoCdpAdmin.routerContext.dataObject[p[0]];if("html"===
g){if("int"===q||"float"===q)if(void 0===a||null==a)a="No information";else{if(a=(new Number(a)).toLocaleString(),NaN==a||"NaN"==a)a="No information"}else"date"===q?a=a?moment.utc(a).local().format("YYYY-MM-DD"):"-":"date_time"===q&&(a=a?moment.utc(a).local().format("YYYY-MM-DD HH:mm:ss"):"-");$(this).html(a)}else if("percentage"===g)$(this).html(a).parent().attr("aria-valuenow",a).css("width",a+"%"),f=$(this).parent(),f.attr("title",a+"% "+f.attr("title"));else if("url"===g)$(this).html(checkToAddUrlValueToDOM(a));
else if("locationcode"===g)f=$("\x3ca/\x3e").attr("href","javascript:").html(a).click(function(){var e=LeoCdpAdmin.routerContext.dataObject.locationCode;e&&""!=e.trim()&&eModal.iframe("https://plus.codes/"+e,a)}),$(this).html(f);else if("inputvalue"===g)"radio"===f||"checkbox"===f?a==$(this).val()&&$(this).attr("checked","checked"):$(this).val(a);else if("html_hashmap"===g){var h=' \x3cul class\x3d"list-group" \x3e ';_.forOwn(a,function(e,k){k=k.trim();c?(e=loadHashMapSelector(r+"_"+k,r,"socialMediaProfiles"===
r?SocialMediaIconMap:"personalContacts"===r?PersonalContactIconsMap:ContactIconsMap,k,e),h+=e):(k="socialMediaProfiles"===r?SocialMediaIconMap[k]?SocialMediaIconMap[k]:!1:"personalContacts"===r?PersonalContactIconsMap[k]?PersonalContactIconsMap[k]:!1:ContactIconsMap[k]?ContactIconsMap[k]:!1,!1===k&&(k=' \x3ci class\x3d"fa fa-info-circle" aria-hidden\x3d"true"\x3e\x3c/i\x3e '),h=h+'\x3cli class\x3d"list-group-item" \x3e '+k+checkToAddUrlValueToDOM(e)+"\x3c/li\x3e")});h+=" \x3c/ul\x3e ";$(this).html(h)}else"html_hashset"===
g?(h='\x3cul class\x3d"list-group" \x3e',_.forOwn(a,function(e,k){e=c?'\x3cdiv class\x3d"col-md-11" \x3e\x3cinput value\x3d"'+e+'" class\x3d"form-control" type\x3d"text" placeholder\x3d"Value" data-fieldholder\x3d"hashset" data-fieldtype\x3d"string" autocomplete\x3d"off"\x3e\x3c/div\x3e\x3cdiv class\x3d"col-md-1" \x3e\x3ch4 onclick\x3d"$(this).parent().parent().parent().remove()" \x3e\x3ci class\x3d"fa fa-times-circle delete-item-btn" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/h4\x3e\x3c/div\x3e':' \x3cdiv class\x3d"col-md-12" \x3e \x3cb\x3e \x3ci class\x3d"fa fa-check" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/b\x3e '+
checkToAddUrlValueToDOM(e)+"\x3c/div\x3e";h=h+'\x3cli class\x3d"list-group-item" \x3e \x3cdiv class\x3d"row" \x3e '+e+"\x3c/div\x3e\x3c/li\x3e"}),h+="\x3c/ul\x3e",$(this).html(h)):"html_list_key_value"===g&&(h='\x3cul class\x3d"list-group" \x3e',f=Object.keys(a),f.sort(),f.forEach(function(e){h=h+'\x3cli class\x3d"list-group-item" \x3e '+e+'  \x3ci class\x3d"fa fa-arrow-right" aria-hidden\x3d"true"\x3e\x3c/i\x3e  '+a[e]+"\x3c/li\x3e"}),h+="\x3c/ul\x3e",$(this).html(h))}else if(2===p.length){var u=
LeoCdpAdmin.routerContext.dataObject[p[0]]||{};a=u[p[1]]||"";"html"===g?$(this).html(a):"date"===q?(a=moment.utc(a).local().format("YYYY-MM-DD"),$(this).html(a)):"date_time"===q?(a=moment.utc(a).local().format("YYYY-MM-DD HH:mm:ss"),$(this).html(a)):"inputvalue"===g?$(this).val(a):"url"===g?$(this).html(checkToAddUrlValueToDOM(a)):"eventlocation"===g&&(f=$("\x3ca/\x3e").attr("href","javascript:").html(a).click(function(){var e=u.locationCode||"";e&&""!=e.trim()&&eModal.iframe("https://plus.codes/"+
e,a)}),$(this).html(f))}else 3===p.length&&(u=LeoCdpAdmin.routerContext.dataObject[p[0]]||{},a=(u[p[1]]||{})[p[2]]||"","html"===g?$(this).html(a):"date"===q?(a=moment.utc(a).local().format("YYYY-MM-DD"),$(this).html(a)):"date_time"===q?(a=moment.utc(a).local().format("YYYY-MM-DD HH:mm:ss"),$(this).html(a)):"inputvalue"===g?$(this).val(a):"url"===g?$(this).html(checkToAddUrlValueToDOM(a)):"eventlocation"===g&&(f=$("\x3ca/\x3e").attr("href","javascript:").html(a).click(function(){var e=u.locationCode||
"";e&&""!=e.trim()&&eModal.iframe("https://plus.codes/"+e,a)}),$(this).html(f)))}).promise().done(function(){"function"===typeof b&&b()})}else LeoAdminApiUtil.logErrorPayload(d)})},updateProfileDataToModel=function(c,m,l){$("#data_model_holder").find("*[data-field]").each(function(){var b=$(this).data("field"),d=$(this).data("fieldholder"),n=$(this).data("fieldtype");d="html"===d?$(this).html().trim():$(this).val();"int"===n?d=parseInt(d.replace(/,/g,"")):"float"===n?d=parseFloat(d.replace(/,/g,"")):
"date"===n&&(d=new Date(d));b=b.split(".");1===b.length?LeoCdpAdmin.routerContext.dataObject[b[0]]=d:2===b.length&&(LeoCdpAdmin.routerContext.dataObject[b[0]][b[1]]=d)}).promise().done(function(){LeoAdminApiUtil.callPostAdminApi(c,m,function(b){0===b.httpCode&&""===b.errorMessage?"function"===typeof l&&l(b):LeoAdminApiUtil.logErrorPayload(b)})})};window.profileTimeseriesChart=!1;
var loadProfileEventDailyReportUnit=function(c,m){var l=getDateFilterValues();l.profileId=c;c=l.beginFilterDate;$("#eventDataFromDate").text((new moment(c)).format("YYYY-MM-DD HH:mm:ss"));c=l.endFilterDate;$("#eventDataToDate").text((new moment(c)).format("YYYY-MM-DD HH:mm:ss"));LeoAdminApiUtil.getSecuredData(baseLeoAdminUrl+"/cdp/analytics360/event-report/profile",l,function(b){0===b.httpCode&&""===b.errorMessage?!0===m&&"object"===typeof window.profileTimeseriesChart?renderTimeseriesChart("timeseriesProfileEventChart",
b.data,!0,profileTimeseriesChart):window.profileTimeseriesChart=renderTimeseriesChart("timeseriesProfileEventChart",b.data,!1):LeoAdminApiUtil.logErrorPayload(b)})};