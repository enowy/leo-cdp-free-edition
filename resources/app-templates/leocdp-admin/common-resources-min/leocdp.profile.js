'use strict';function profileAddNewTextHashSet(e){$('p[data-field\x3d"'+e+'"] \x3e ul').append('\x3cli class\x3d"list-group-item" \x3e\x3cdiv class\x3d"row" \x3e\x3cdiv class\x3d"col-md-11" \x3e\x3cinput class\x3d"form-control" type\x3d"text" placeholder\x3d"Value" data-fieldholder\x3d"hashset" data-fieldtype\x3d"string" autocomplete\x3d"off"\x3e\x3c/div\x3e\x3cdiv class\x3d"col-md-1" \x3e\x3ch4 onclick\x3d"$(this).parent().parent().parent().remove()" \x3e\x3ci class\x3d"fa fa-times-circle delete-item-btn" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/h4\x3e \x3c/div\x3e\x3c/div\x3e\x3c/li\x3e')}
function removeHashMapItem(e){$(e).parent().parent().remove()}
function loadHashMapSelector(e,m,l,c,b){var n='\x3cdiv class\x3d"col-md-3" \x3e \x3cselect class\x3d"form-control" id\x3d"key_'+e+'" name\x3d"'+m+'" \x3e';_.forOwn(l,function(r,f){r='\x3coption name\x3d"'+m+'" value\x3d"'+f+'"\x3e '+f.toUpperCase()+" \x3c/option\x3e";f===c&&(r='\x3coption name\x3d"'+m+'" selected value\x3d"'+f+'"\x3e '+f.toUpperCase()+" \x3c/option\x3e");n+=r});n+=" \x3c/select\x3e \x3c/div\x3e";""===c&&$("#key_"+e).find("option:first").attr("selected","selected");return'\x3cli id\x3d"item_'+
e+'" class\x3d"list-group-item" \x3e\x3cdiv class\x3d"row" \x3e '+n+('\x3cdiv class\x3d"col-md-8" \x3e\x3cinput id\x3d"value_'+e+'" value\x3d"'+(b?b:"")+'" class\x3d"form-control" type\x3d"text" placeholder\x3d"Value" data-fieldholder\x3d"hashmap" data-fieldtype\x3d"string" autocomplete\x3d"off"\x3e\x3c/div\x3e\x3cdiv title\x3d"Delete" class\x3d"col-md-1" onclick\x3d"removeHashMapItem(this)" \x3e \x3ch4\x3e\x3ci class\x3d"fa fa-times-circle delete-item-btn" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/h4\x3e \x3c/div\x3e \x3c/div\x3e\x3c/li\x3e')}
var addNewHashMapItem=function(e,m){var l=e+"_"+(new Date).getTime(),c=$("#"+e),b=Object.assign({},m);c.find("option:selected").each(function(){var n=$(this).val();delete b[n]});e=loadHashMapSelector(l,e,b,"","");c.find("ul.list-group").append(e)},loadProfileDataIntoDOM=function(e,m,l,c){LeoAdminApiUtil.callPostAdminApi(baseAdminApi+"/cdp/profile/get",{id:m},function(b){if(0===b.httpCode&&""===b.errorMessage){var n=b.canInsertData,r=b.canDeleteData;b.canEditData||$("button.data-control-edit").attr("disabled",
"disabled");r||$("button.data-control-delete").attr("disabled","disabled");n||$("button.data-control-insert").attr("disabled","disabled");LeoCdpAdmin.routerContext.dataObject="function"===typeof l?l(b.data):b.data;$("#data_model_holder").find("*[data-field]").each(function(){$(this).prop("tagName");var f=$(this).attr("type"),g=$(this).data("fieldholder"),t=$(this).data("fieldtype"),q=$(this).data("field"),p=q.split(".");if(1===p.length){var a=LeoCdpAdmin.routerContext.dataObject[p[0]];if("html"===
g){if("int"===t||"float"===t)if(void 0===a||null==a)a="No information";else{if(a=(new Number(a)).toLocaleString(),NaN==a||"NaN"==a)a="No information"}else"date"===t&&(a=a?moment.utc(a).local().format("YYYY-MM-DD HH:mm:ss"):"-");$(this).html(a)}else if("percentage"===g)$(this).html(a).parent().attr("aria-valuenow",a).css("width",a+"%"),f=$(this).parent(),f.attr("title",a+"% "+f.attr("title"));else if("url"===g)$(this).html(checkToAddUrlValueToDOM(a));else if("locationcode"===g)f=$("\x3ca/\x3e").attr("href",
"javascript:").html(a).click(function(){var d=LeoCdpAdmin.routerContext.dataObject.locationCode;d&&""!=d.trim()&&eModal.iframe("https://plus.codes/"+d,a)}),$(this).html(f);else if("inputvalue"===g)"radio"===f||"checkbox"===f?a==$(this).val()&&$(this).attr("checked","checked"):$(this).val(a);else if("html_hashmap"===g){var h=' \x3cul class\x3d"list-group" \x3e ';_.forOwn(a,function(d,k){k=k.trim();e?(d=loadHashMapSelector(q+"_"+k,q,"socialMediaProfiles"===q?SocialMediaIconMap:"personalContacts"===
q?PersonalContactIconsMap:ContactIconsMap,k,d),h+=d):(k="socialMediaProfiles"===q?SocialMediaIconMap[k]?SocialMediaIconMap[k]:!1:"personalContacts"===q?PersonalContactIconsMap[k]?PersonalContactIconsMap[k]:!1:ContactIconsMap[k]?ContactIconsMap[k]:!1,!1===k&&(k=' \x3ci class\x3d"fa fa-info-circle" aria-hidden\x3d"true"\x3e\x3c/i\x3e '),h=h+'\x3cli class\x3d"list-group-item" \x3e '+k+checkToAddUrlValueToDOM(d)+"\x3c/li\x3e")});h+=" \x3c/ul\x3e ";$(this).html(h)}else"html_hashset"===g?(h='\x3cul class\x3d"list-group" \x3e',
_.forOwn(a,function(d,k){d=e?'\x3cdiv class\x3d"col-md-11" \x3e\x3cinput value\x3d"'+d+'" class\x3d"form-control" type\x3d"text" placeholder\x3d"Value" data-fieldholder\x3d"hashset" data-fieldtype\x3d"string" autocomplete\x3d"off"\x3e\x3c/div\x3e\x3cdiv class\x3d"col-md-1" \x3e\x3ch4 onclick\x3d"$(this).parent().parent().parent().remove()" \x3e\x3ci class\x3d"fa fa-times-circle delete-item-btn" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/h4\x3e\x3c/div\x3e':' \x3cdiv class\x3d"col-md-12" \x3e \x3cb\x3e \x3ci class\x3d"fa fa-check" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/b\x3e '+
checkToAddUrlValueToDOM(d)+"\x3c/div\x3e";h=h+'\x3cli class\x3d"list-group-item" \x3e \x3cdiv class\x3d"row" \x3e '+d+"\x3c/div\x3e\x3c/li\x3e"}),h+="\x3c/ul\x3e",$(this).html(h)):"html_list_key_value"===g&&(h='\x3cul class\x3d"list-group" \x3e',f=Object.keys(a),f.sort(),f.forEach(function(d){h=h+'\x3cli class\x3d"list-group-item" \x3e '+d+'  \x3ci class\x3d"fa fa-arrow-right" aria-hidden\x3d"true"\x3e\x3c/i\x3e  '+a[d]+"\x3c/li\x3e"}),h+="\x3c/ul\x3e",$(this).html(h))}else if(2===p.length){var u=
LeoCdpAdmin.routerContext.dataObject[p[0]]||{};a=u[p[1]]||"";"html"===g?$(this).html(a):"date"===t?(a=moment.utc(a).local().format("YYYY-MM-DD HH:mm:ss"),$(this).html(a)):"inputvalue"===g?$(this).val(a):"url"===g?$(this).html(checkToAddUrlValueToDOM(a)):"eventlocation"===g&&(f=$("\x3ca/\x3e").attr("href","javascript:").html(a).click(function(){var d=u.locationCode||"";d&&""!=d.trim()&&eModal.iframe("https://plus.codes/"+d,a)}),$(this).html(f))}else 3===p.length&&(u=LeoCdpAdmin.routerContext.dataObject[p[0]]||
{},a=(u[p[1]]||{})[p[2]]||"","html"===g?$(this).html(a):"date"===t?(a=moment.utc(a).local().format("YYYY-MM-DD HH:mm:ss"),$(this).html(a)):"inputvalue"===g?$(this).val(a):"url"===g?$(this).html(checkToAddUrlValueToDOM(a)):"eventlocation"===g&&(f=$("\x3ca/\x3e").attr("href","javascript:").html(a).click(function(){var d=u.locationCode||"";d&&""!=d.trim()&&eModal.iframe("https://plus.codes/"+d,a)}),$(this).html(f)))}).promise().done(function(){"function"===typeof c&&c()})}else LeoAdminApiUtil.logErrorPayload(b)})},
updateProfileDataToModel=function(e,m,l){$("#data_model_holder").find("*[data-field]").each(function(){var c=$(this).data("field"),b=$(this).data("fieldholder"),n=$(this).data("fieldtype");b="html"===b?$(this).html().trim():$(this).val();"int"===n?b=parseInt(b.replace(/,/g,"")):"float"===n?b=parseFloat(b.replace(/,/g,"")):"date"===n&&(b=new Date(b));c=c.split(".");1===c.length?LeoCdpAdmin.routerContext.dataObject[c[0]]=b:2===c.length&&(LeoCdpAdmin.routerContext.dataObject[c[0]][c[1]]=b)}).promise().done(function(){LeoAdminApiUtil.callPostAdminApi(e,
m,function(c){0===c.httpCode&&""===c.errorMessage?"function"===typeof l&&l(c):LeoAdminApiUtil.logErrorPayload(c)})})},loadProfileEventDailyReportUnit=function(e,m){var l=getDateFilterValues(),c=l.beginFilterDate;$("#beginReportDate").text((new moment(c)).format("YYYY-MM-DD HH:mm:ss"));c=l.endFilterDate;$("#endReportDate").text((new moment(c)).format("YYYY-MM-DD HH:mm:ss"));c=baseAdminApi+"/cdp/analytics360/event-report";l.profileId=e;LeoAdminApiUtil.getSecuredData(c,l,function(b){0===b.httpCode&&
""===b.errorMessage?($("#eventDataFromDate").text((new moment(b.data.beginFilterDate)).format("YYYY-MM-DD")),$("#eventDataToDate").text((new moment(b.data.endFilterDate)).format("YYYY-MM-DD")),!0===m&&!1!==profileTimeseriesChart?renderTimeseriesChart("timeseriesProfileEventChart",b.data,!0,profileTimeseriesChart):profileTimeseriesChart=renderTimeseriesChart("timeseriesProfileEventChart",b.data,!1)):LeoAdminApiUtil.logErrorPayload(b)})};