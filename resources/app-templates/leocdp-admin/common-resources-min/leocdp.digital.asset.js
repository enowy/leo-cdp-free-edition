'use strict';var updateBreadcrumbInAssetGroup=function(a,b){for(var c in a){var d=a[c],e=d.name;d=leoCdpRouterParams([c,d.assetType,d.name]);$("#tnv_Asset_Groups").attr("href","#calljs-leoCdpRouter('Asset_Groups','"+d+"')").text(e).attr("title",e)}$("#tnv_Asset_Group_Details").text(b)},updateBreadcrumbInAssetPost=function(a,b,c){for(var d in a){var e=a[d],g=e.name;e=leoCdpRouterParams([d,e.assetType,e.name]);$("#tnv_Asset_Groups").attr("href","#calljs-leoCdpRouter('Asset_Groups','"+e+"')").text(g).attr("title",
g)}for(var h in b)a=b[h].title,$("#tnv_Asset_Group_Details").attr("href","#calljs-leoCdpRouter('Asset_Group_Details','"+h+"')").text(a).attr("title",a);$("#tnv_Content_Post").text(c).attr("title",c)},getAssetEditorCallJs=function(a,b){return 2===a?"calljs-leoCdpRouter('Asset_Product_Item_Editor','"+b+"')":3===a?"calljs-leoCdpRouter('Asset_Service_Item_Editor','"+b+"')":4===a||6===a||7===a?"calljs-leoCdpRouter('Asset_Template_Editor','"+b+"')":13===a?"calljs-leoCdpRouter('Asset_Feedback_Form_Editor','"+
b+"')":"calljs-leoCdpRouter('Asset_Content_Editor','"+b+"')"};function getYouTubeVideoId(a){var b,c="";if(b=a.match(/(\?|&)v=([^&#]+)/))c=b.pop();else if(b=a.match(/(\.be\/)+([^\/]+)/))c=b.pop();else if(b=a.match(/(embed\/)+([^\/]+)/))c=b.pop().replace("?rel\x3d0","");return c.split("\x26")[0]}
function checkPostTypeAndSetupMediaEditor(a,b){console.log("checkPostTypeAndSetupMediaEditor postType "+a);if(1===a||2===a||6===a||8===a||9===a)$("#content_div").html(editorViewTpl),window.trixElement=document.querySelector('trix-editor[input\x3d"mediaInfo"]'),trixElement.editor.insertHTML(b),$(trixElement).focus(function(){trixElement=$(this)[0]}),trixElement.addEventListener("trix-attachment-add",function(d){});else{var c=$(documentUrlViewTpl).val(b);$("#content_div").html(c);c.change(function(){renderPostMediaInfo(c.val().trim())})}}
function normalizeMediaHtml(a){a=$("\x3cdiv/\x3e").html(a);a.find("img").each(function(){320<parseInt($(this).attr("width"))&&$(this).attr("style","height:100%!important;width:100%!important;object-fit:contain!important")});return a.html()}
function toggleRawHtmlEditor(a){if("hidden"===$(a).data("visibilty")){$("#raw_media_container").show();$("#content_div").hide();var b=$("#mediaInfo").val();rawHtmlEditor.setValue(b);CodeMirrorAutoFormat(rawHtmlEditor);$(a).data("visibilty","visible");rawHtmlEditor.setSize(null,800)}else $("#raw_media_container").hide(),$("#content_div").show(),trixElement.editor.loadHTML(rawHtmlEditor.getValue()),$(a).data("visibilty","hidden"),rawHtmlEditor.setSize(null,1)}
function gotoAssetItemView(a,b,c){a=leoCdpRouterParams([a,b,c]);location.hash="calljs-leoCdpRouter('Asset_Content_View','"+a+"')"}function getFeedbackFormTypeAsString(a){return 0===a?"SURVEY":1===a?"COMMENT":2===a?"RATING":3===a?"CES":4===a?"CSAT":5===a?"NPS":""}
function initEmbeddedFeedbackForm(a,b){var c=b.title,d="leoFeedbackForm_"+b.id,e="https://"+baseLeoObserverDomain+"/webform?tplid\x3d"+b.id,g=getFeedbackFormTypeAsString(b.templateType),h=g+" Form";$("#feedback_form_code_holder .CodeMirror").remove();b=$("#feedback_form_code_holder .code")[0];var k=CodeMirror.fromTextArea(b,{mode:"htmlmixed",lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,readOnly:!1});k.setSize(null,460);setTimeout(function(){$("#"+a+" .eventName").text(h);var f=$("#feedback_form_code_holder .code").val().trim().replaceAll("__feedbackFormTitle__",
c);f=f.replaceAll("__eventName__",h);f=f.replaceAll("__scriptNodeId__",d);f=f.replaceAll("__tplFeedbackType__",g);f=f.replaceAll("__feedbackFormFullUrl__",e);k.getDoc().setValue('\x3cscript id\x3d"'+d+'" \x3e\n'+f+"\n\x3c/script\x3e");k.refresh();k.execCommand("selectAll");addHandlerCopyCodeButton("#feedback_form_code_holder .code","#"+a+" button.btn-copy-code")},640)};