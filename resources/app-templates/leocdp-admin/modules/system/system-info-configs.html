
<div class="row">
    <div class="col-lg-12">
        <h5 class="page-header" id="page_breadcrumb" > </h5>
    </div>
</div>
    
<div class="container-fluid">

    <!-- MAIN BODY here -->

	<div class="row">
		<div class="col-lg-12">
			<div class="row" style="margin-bottom: 15px">
				<h4> System Configuration for LEO A.I extensions and Digital Marketing Automation Services </h4>
				<b class="highlight_text" > All LEO AI services and Digital Marketing Automation Services are under development </b>
			</div>
			<div class="row" id="configs_holder" >
				<!-- list -->
			</div>
		</div>
	</div>

</div>


<script id='tpl_system_config_box' type="text/html" >
<div class="col-lg-4">
  <div class="panel panel-info panel_active_<%- active %> ">
	<div class="panel-heading"> 
		<b id="header_<%- id %>_<%- active %>" > <mark> <i class="fa <%- icon %> " aria-hidden="true"></i> <span style="font-size:13px"> <%- name %> </span> </mark> </b> 
	</div>
	<div class="panel-body">
		<div class="row" >
			<div class="col-md-12">
				<div class="form-group">
  					<label for="<%- id %>_service_url"> API URL </label>
  					<input type="text" value="<%- serviceUrl %>" class="form-control" id="<%- id %>_service_url" placeholder="Enter API URL here" <%- disabledText %> >
					<br>
					<div id="<%- id %>_api_key_div" >
						<label for="<%- id %>_service_token"> API key </label>
						<input type="text" value="" class="form-control" id="<%- id %>_service_token" placeholder="Enter API Key here" <%- disabledText %> >
					<div>
				</div>
			</div>
		</div>
	 	<div id="<%- id %>_buttons_div" class="row readOnly_<%- readOnly %> active_<%- active %>" style="margin-top: 10px">
			<div class="col-md-12 text-center">
		    	<button type="button" class="btn btn-primary btn-sm"  title="Save Now" onclick="saveSystemServiceInfo('<%- id %>')" <%- disabledText %>  > 
		  			<i class="fa fa-check" aria-hidden="true"></i> Save Configs 
		  		</button>
		    </div>
	 	</div>
	</div>
  </div>
</div>
</script>



<script>
	var initSystemConfigManagement = function() {
		loadSystemConfigs();
	}

	var loadSystemConfigs = function(){
		var configs = [];
		configs.push(
			{
				id : "sendinblue_email_api_key",
				icon: "fa-server",
				name : "[Email] SendInBlue Email Marketing Automation",
				readOnly: false,
				serviceUrl: '',
				active: false,
				show: true
			}
			,
			{
				id : "mailchimp_email_api_key",
				icon: "fa-server",
				name : "[Email] MailChimp Email Marketing Automation",
				readOnly: false,
				serviceUrl: '',
				active: false,
				show: true
			}
			,
			{
				id : "onesignal_notification_api_key",
				icon: "fa-server",
				name : "[Notification] OneSignal Cloud Messaging",
				readOnly: false,
				serviceUrl: '',
				active: false,
				show: true
			}
			,
			{
				id : "firebase_notification_api_key",
				icon: "fa-server",
				name : "[Notification] Firebase Cloud Messaging",
				readOnly: false,
				serviceUrl: '',
				active: false,
				show: true
			}
			,
			{
				id : "leocdp_personalization_engine",
				icon: "fa-server",
				name : "[LEO A.I.] Personalization Engine",
				readOnly: false,
				serviceUrl: '',
				active: false,
				show: true
			}
			,
			{
				id : "leocdp_sentiment_analysis",
				icon: "fa-server",
				name : "[LEO A.I.] Feedback Sentiment Analysis",
				readOnly: false,
				serviceUrl: '',
				active: false,
				show: true
			}
		);
		
		var holder = $('#configs_holder');
		_.forEach(configs,function(e,i){
			var id = e.id;
			e.disabledText = e.readOnly ? 'disabled' : '';
			
			if(e.show) {
				var boxTpl = _.template( $('#tpl_system_config_box').html() );
				var html = boxTpl(e);
				
				holder.append(html);
				
				$('#header_' + id + '_true').css('color','#0000CD');
				if(e.serviceUrl === 'local-system'){
					$('#' + id + '_buttons_div').find('button').attr('disabled','disabled');
					$('#' + id + '_api_key_div').css('visibility','hidden');
				}
			}
			
		});
		holder.find('div.active_false button').attr('class','btn btn-default').attr('disabled','disabled');
		holder.find('div.panel_active_false').attr('class','panel panel-default panel_active_false');
		holder.find('div.panel_active_false').find('input').attr('disabled','disabled');
	}
	
	function openSystemServiceUrl(){
		
	}
	
	function saveSystemServiceInfo(){
		
	}
	
</script>