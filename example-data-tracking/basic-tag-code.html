<html>

<head>
    <title>Basic Tracking Demo for Leo CDP - Customer Data Platform book</title>
    <script>
        var leoCdpTrackedProducts = leoCdpTrackedProducts || [];
        leoCdpTrackedProducts.push({
            productId: "978-1119790112",
            idType: "ISBN",
            originalPrice: 25,
            salePrice: 25,
            couponCode: "",
            quantity: 1,
            currency: "USD",
        });
    </script>
</head>

<body>

    <script>
        // (1) loading LEO OBSERVER JavaScript code for [Demo blog]
        (function () {
            window.leoObserverLogDomain = "demotrack.leocdp.net";
            window.leoObserverCdnDomain = "demo.leocdp.net/public";
            window.leoObserverId = "3UsJfOzYUXaC5SBfnfnTyQ";
            // Data Touchpoint Metadata 
            window.srcTouchpointName = encodeURIComponent(document.title);
            window.srcTouchpointUrl = encodeURIComponent(location.href);

            var leoproxyJsPath = '/js/leo-observer/leo.proxy.min.js';
            var src = location.protocol + '//' + window.leoObserverCdnDomain + leoproxyJsPath;
            var jsNode = document.createElement('script');
            jsNode.async = true; jsNode.defer = true; jsNode.src = src;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jsNode, s);
        })();

        // (2) LEO OBSERVER is ready, tracking page-view
        function leoObserverProxyReady(session) {
            var eventData = {};
            LeoObserverProxy.recordViewEvent("page-view", eventData);
            // add more event data here
        }
        // (3) all event tracking functions
        var LeoObserver = {};

        // (3.1) function to track Action Event "AcceptTracking"
        LeoObserver.recordEventAcceptTracking = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("accept-tracking", eventData);
        }

        // (3.2) function to track View Event "PageView"
        LeoObserver.recordEventPageView = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordViewEvent("page-view", eventData);
        }

        // (3.3) function to track Action Event "Search"
        LeoObserver.recordEventSearch = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("search", eventData);
        }

        // (3.4) function to track View Event "ContentView"
        LeoObserver.recordEventContentView = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordViewEvent("content-view", eventData);
        }

        // (3.5) function to track View Event "ItemView"
        LeoObserver.recordEventItemView = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordViewEvent("item-view", eventData);
        }

        // (3.6) function to track View Event "CourseView"
        LeoObserver.recordEventCourseView = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordViewEvent("course-view", eventData);
        }

        // (3.7) function to track Action Event "PlayVideo"
        LeoObserver.recordEventPlayVideo = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("play-video", eventData);
        }

        // (3.8) function to track Action Event "ClickDetails"
        LeoObserver.recordEventClickDetails = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("click-details", eventData);
        }

        // (3.9) function to track Feedback Event "SurveyView"
        LeoObserver.recordEventSurveyView = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("survey-view", eventData);
        }

        // (3.10) function to track Action Event "ShortLinkClick"
        LeoObserver.recordEventShortLinkClick = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("short-link-click", eventData);
        }

        // (3.11) function to track Action Event "QRCodeScan"
        LeoObserver.recordEventQRCodeScan = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("qr-code-scan", eventData);
        }

        // (3.12) function to track Action Event "NotificationClick"
        LeoObserver.recordEventNotificationClick = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("notification-click", eventData);
        }

        // (3.13) function to track Action Event "RegisterAccount"
        LeoObserver.recordEventRegisterAccount = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("register-account", eventData);
        }

        // (3.14) function to track Action Event "SubmitContact"
        LeoObserver.recordEventSubmitContact = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("submit-contact", eventData);
        }

        // (3.15) function to track Action Event "UserLogin"
        LeoObserver.recordEventUserLogin = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("user-login", eventData);
        }

        // (3.16) function to track Action Event "EmailClick"
        LeoObserver.recordEventEmailClick = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("email-click", eventData);
        }

        // (3.17) function to track Action Event "JoinWorkshop"
        LeoObserver.recordEventJoinWorkshop = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("join-workshop", eventData);
        }

        // (3.18) function to track Action Event "JoinWebinar"
        LeoObserver.recordEventJoinWebinar = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("join-webinar", eventData);
        }

        // (3.19) function to track Action Event "JoinCommunity"
        LeoObserver.recordEventJoinCommunity = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("join-community", eventData);
        }

        // (3.20) function to track Action Event "CheckIn"
        LeoObserver.recordEventCheckIn = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("check-in", eventData);
        }

        // (3.21) function to track Action Event "AskQuestion"
        LeoObserver.recordEventAskQuestion = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordActionEvent("ask-question", eventData);
        }

        // (3.22) function to track Conversion Event "AddWishlist"
        LeoObserver.recordEventAddWishlist = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("add-wishlist", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.23) function to track Conversion Event "ProductTrial"
        LeoObserver.recordEventProductTrial = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("product-trial", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.24) function to track Conversion Event "AddToCart"
        LeoObserver.recordEventAddToCart = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("add-to-cart", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.25) function to track Conversion Event "OrderCheckout"
        LeoObserver.recordEventOrderCheckout = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("order-checkout", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.26) function to track Conversion Event "Purchase"
        LeoObserver.recordEventPurchase = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("purchase", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.27) function to track Conversion Event "Enroll"
        LeoObserver.recordEventEnroll = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("enroll", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.28) function to track Conversion Event "Subscribe"
        LeoObserver.recordEventSubscribe = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("subscribe", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.29) function to track Feedback Event "ChatforSupport"
        LeoObserver.recordEventChatforSupport = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("chat-for-support", eventData);
        }

        // (3.30) function to track Conversion Event "MadePayment"
        LeoObserver.recordEventMadePayment = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("made-payment", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.31) function to track Feedback Event "SubmitRatingForm"
        LeoObserver.recordEventSubmitRatingForm = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("submit-rating-form", eventData);
        }

        // (3.32) function to track Feedback Event "SubmitCommentForm"
        LeoObserver.recordEventSubmitCommentForm = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("submit-comment-form", eventData);
        }

        // (3.33) function to track Conversion Event "Engage"
        LeoObserver.recordEventEngage = function (eventData, shoppingCartItems, transactionId, transactionValue, currencyCode) {
            // need 5 params
            eventData = typeof eventData === "object" ? eventData : {};
            shoppingCartItems = typeof shoppingCartItems === "object" ? shoppingCartItems : [];
            transactionId = typeof transactionId === "string" ? transactionId : "";
            transactionValue = typeof transactionValue === "number" ? transactionValue : 0;
            currencyCode = typeof currencyCode === "string" ? currencyCode : "USD";
            // submit data
            LeoObserverProxy.recordConversionEvent("engage", eventData, transactionId, shoppingCartItems, transactionValue, currencyCode);

        }

        // (3.34) function to track Feedback Event "SubmitFeedbackForm"
        LeoObserver.recordEventSubmitFeedbackForm = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("submit-feedback-form", eventData);
        }

        // (3.35) function to track Feedback Event "SubmitCESForm"
        LeoObserver.recordEventSubmitCESForm = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("submit-ces-form", eventData);
        }

        // (3.36) function to track Feedback Event "SubmitCSATForm"
        LeoObserver.recordEventSubmitCSATForm = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("submit-csat-form", eventData);
        }

        // (3.37) function to track Feedback Event "SubmitNPSForm"
        LeoObserver.recordEventSubmitNPSForm = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("submit-nps-form", eventData);
        }

        // (3.38) function to track Feedback Event "NegativeFeedback"
        LeoObserver.recordEventNegativeFeedback = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("negative-feedback", eventData);
        }

        // (3.40) function to track Feedback Event "NegativeSocialReview"
        LeoObserver.recordEventNegativeSocialReview = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("negative-social-review", eventData);
        }

        // (3.43) function to track Feedback Event "ViralNegativeReview"
        LeoObserver.recordEventViralNegativeReview = function (eventData) {
            eventData = eventData ? eventData : {};
            LeoObserverProxy.recordFeedbackEvent("viral-negative-review", eventData);
        }

    </script>


    <!-- Track Event [add-to-cart] -->
    <script>
        setTimeout(function(){
            LeoObserver.recordEventAcceptTracking();
        },2000)

        setTimeout(function(){
            LeoObserver.recordEventPageView();
        },4000)
        

        setTimeout(function () {
            if (typeof leoCdpTrackedProducts === "object") {
                leoCdpTrackedProducts.forEach(function (item) {
                    var productId = item.productId;
                    if (typeof productId === "string") {
                        var idType = item.idType || "external_ID";
                        var quantity = item.quantity || 1;
                        var currency = item.currency || "USD";
                        var eventName = "add-to-cart";
                        var model = { "itemtId": productId, "idType": idType, quantity: quantity };

                    
                        var eventData = { "productIds": productId, "idType": idType };
                        var shoppingCartItems = [];
                        shoppingCartItems.push(model);
                        LeoObserverProxy.recordConversionEvent(eventName, eventData, "", shoppingCartItems, 0, currency);
                        console.log('leoTrackEventAddToCart', shoppingCartItems);
                    }
                })
            }
        }, 6000);

    </script>
</body>

</html>